<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GCP BigQuery ë°ì´í„° ëŒ€ì‹œë³´ë“œ ê¸°ìˆ ëª…ì„¸ì„œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            min-height: 100vh;
            display: flex;
        }

        /* ì‚¬ì´ë“œë°” */
        .sidebar {
            width: 300px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 2rem 1rem;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            border-right: 1px solid rgba(0,0,0,0.1);
        }

        .sidebar h2 {
            color: #4a5568;
            margin-bottom: 1rem;
            font-size: 1.2rem;
            border-bottom: 2px solid #667eea;
            padding-bottom: 0.5rem;
        }

        .toc {
            list-style: none;
        }

        .toc li {
            margin-bottom: 0.5rem;
        }

        .toc a {
            color: #4a5568;
            text-decoration: none;
            padding: 0.5rem;
            display: block;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .toc a:hover {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }

        .toc .sub-item {
            margin-left: 1rem;
            font-size: 0.8rem;
        }

        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        .header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .header .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .section {
            background: white;
            margin-bottom: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .section-header {
            background: #f8f9fa;
            padding: 1.5rem;
            border-bottom: 1px solid #e9ecef;
        }

        .section-header h2 {
            color: #4a5568;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .section-content {
            padding: 2rem;
        }

        h3 {
            color: #2d3748;
            margin: 1.5rem 0 1rem 0;
            font-size: 1.3rem;
            border-left: 4px solid #667eea;
            padding-left: 1rem;
        }

        h4 {
            color: #4a5568;
            margin: 1rem 0 0.5rem 0;
            font-size: 1.1rem;
        }

        h5 {
            color: #718096;
            margin: 0.8rem 0 0.4rem 0;
            font-size: 1rem;
        }

        p {
            margin-bottom: 1rem;
            text-align: justify;
        }

        /* ì½”ë“œ ë¸”ë¡ */
        pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1rem 0;
            position: relative;
        }

        code {
            background: #edf2f7;
            color: #2d3748;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }

        pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        /* í…Œì´ë¸” */
        .table-wrapper {
            overflow-x: auto;
            margin: 1rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        th {
            background: #667eea;
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 0.8rem 1rem;
            border-bottom: 1px solid #e2e8f0;
        }

        tr:hover {
            background: #f7fafc;
        }

        /* ë¦¬ìŠ¤íŠ¸ */
        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        /* íŠ¹ë³„ ë°•ìŠ¤ */
        .info-box {
            background: #e6fffa;
            border: 1px solid #81e6d9;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .warning-box {
            background: #fffbeb;
            border: 1px solid #f6e05e;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .success-box {
            background: #f0fff4;
            border: 1px solid #68d391;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .error-box {
            background: #fed7d7;
            border: 1px solid #fc8181;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        /* ì²´í¬ë¦¬ìŠ¤íŠ¸ */
        .checklist {
            list-style: none;
            padding-left: 0;
        }

        .checklist li {
            padding: 0.3rem 0;
        }

        .checklist li:before {
            content: 'âœ…';
            margin-right: 0.5rem;
        }

        /* ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ */
        .architecture {
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            margin: 1rem 0;
            font-family: monospace;
            line-height: 2;
        }

        /* íŒŒì¼ êµ¬ì¡° */
        .file-tree {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            line-height: 1.4;
            margin: 1rem 0;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                position: static;
            }
            
            .main-content {
                padding: 1rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }

        /* í”„ë¦°íŠ¸ ìŠ¤íƒ€ì¼ */
        @media print {
            body {
                background: white;
            }
            
            .sidebar {
                display: none;
            }
            
            .container {
                background: white;
                box-shadow: none;
            }
            
            .section {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ddd;
            }
        }

        /* ìŠ¤í¬ë¡¤ë°” ì»¤ìŠ¤í„°ë§ˆì´ì§• */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #5a67d8;
        }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        .section {
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ì‚¬ì´ë“œë°” ëª©ì°¨ -->
        <nav class="sidebar">
            <h2>ğŸ“‹ ëª©ì°¨</h2>
            <ul class="toc">
                <li><a href="#overview">ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”</a></li>
                <li><a href="#architecture">ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜</a></li>
                <li><a href="#gcp-setup">âš™ï¸ GCP API ì—°ë™ ì¤€ë¹„</a>
                    <ul class="sub-item">
                        <li><a href="#project-setup">í”„ë¡œì íŠ¸ ì„¤ì •</a></li>
                        <li><a href="#service-account">ì„œë¹„ìŠ¤ ê³„ì •</a></li>
                        <li><a href="#bigquery-setup">BigQuery ì„¤ì •</a></li>
                    </ul>
                </li>
                <li><a href="#source-structure">ğŸ“ ì†ŒìŠ¤ ì½”ë“œ êµ¬ì¡°</a></li>
                <li><a href="#installation">ğŸ”§ ì„¤ì¹˜ ë° ì„¤ì •</a></li>
                <li><a href="#features">ğŸ¯ ê¸°ëŠ¥ ëª…ì„¸</a></li>
                <li><a href="#optimization">ğŸ’° ë¹„ìš© ìµœì í™”</a></li>
                <li><a href="#security">ğŸ›¡ï¸ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­</a></li>
                <li><a href="#troubleshooting">ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</a></li>
                <li><a href="#future-plans">ğŸš€ í–¥í›„ ê³„íš</a></li>
            </ul>
        </nav>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <main class="main-content">
            <!-- í—¤ë” -->
            <div class="header">
                <h1>GCP BigQuery ë°ì´í„° ëŒ€ì‹œë³´ë“œ</h1>
                <p class="subtitle">ê¸°ìˆ ëª…ì„¸ì„œ ë° êµ¬ì¶• ê°€ì´ë“œ</p>
                <p style="margin-top: 1rem; font-size: 0.9rem;">
                    ğŸ“… ì‘ì„±ì¼: 2024.08.21 | ğŸ“ ë²„ì „: v1.0.0 | ğŸ”§ ìƒíƒœ: ìš´ì˜ ì¤‘
                </p>
            </div>

            <!-- í”„ë¡œì íŠ¸ ê°œìš” -->
            <section id="overview" class="section">
                <div class="section-header">
                    <h2>ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”</h2>
                </div>
                <div class="section-content">
                    <h3>í”„ë¡œì íŠ¸ëª…</h3>
                    <p><strong>SESCO ë°ì´í„° ëŒ€ì‹œë³´ë“œ - GCP BigQuery ì—°ë™ ë¶„ì„ í”Œë«í¼</strong></p>

                    <h3>ëª©ì </h3>
                    <ul>
                        <li>Google Cloud Platform BigQuery APIë¥¼ í™œìš©í•œ ì‹¤ì‹œê°„ ë°ì´í„° ë¶„ì„ ëŒ€ì‹œë³´ë“œ</li>
                        <li>ê¸°ì¡´ Looker Studio ëŒ€ì²´ ì†”ë£¨ì…˜</li>
                        <li>ë¹„ìš© ìµœì í™”ëœ ë°ì´í„° ì¡°íšŒ ë° ì‹œê°í™”</li>
                    </ul>

                    <h3>ì£¼ìš” íŠ¹ì§•</h3>
                    <ul class="checklist">
                        <li><strong>ì„œë¹„ìŠ¤ ê³„ì • ê¸°ë°˜ ì¸ì¦</strong>: OAuth2 JWT í† í° ë°©ì‹</li>
                        <li><strong>ë¹„ìš© ìµœì í™”</strong>: ìµœëŒ€ 1,000í–‰ ì œí•œ, ìºì‹œ ì‹œìŠ¤í…œ</li>
                        <li><strong>Google Sheets ë…ë¦½</strong>: ë„¤ì´í‹°ë¸Œ BigQuery í…Œì´ë¸” ì‚¬ìš©</li>
                        <li><strong>ì‹¤ì‹œê°„ ë¶„ì„</strong>: ì¼ë³„/í‚¤ì›Œë“œ/ë””ë°”ì´ìŠ¤/ìº í˜ì¸ ë¶„ì„</li>
                        <li><strong>ë°˜ì‘í˜• UI</strong>: ëª¨ë°”ì¼ í˜¸í™˜ ê¸€ë˜ìŠ¤ëª¨í”¼ì¦˜ ë””ìì¸</li>
                    </ul>
                </div>
            </section>

            <!-- ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ -->
            <section id="architecture" class="section">
                <div class="section-header">
                    <h2>ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜</h2>
                </div>
                <div class="section-content">
                    <h3>ì „ì²´ êµ¬ì¡°</h3>
                    <div class="architecture">
                        Frontend (PHP/HTML/CSS/JS)<br>
                        â†“<br>
                        BigQuery API (OAuth2 ì¸ì¦)<br>
                        â†“<br>
                        GCP BigQuery (sesco3_sample í…Œì´ë¸”)<br>
                        â†“<br>
                        ìºì‹œ ì‹œìŠ¤í…œ (íŒŒì¼ ê¸°ë°˜, 10ë¶„)
                    </div>

                    <h3>ê¸°ìˆ  ìŠ¤íƒ</h3>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>ë¶„ì•¼</th>
                                    <th>ê¸°ìˆ </th>
                                    <th>ë²„ì „</th>
                                    <th>ìš©ë„</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Backend</td>
                                    <td>PHP, cURL, OpenSSL</td>
                                    <td>7.4+</td>
                                    <td>ì„œë²„ ë¡œì§, API í†µì‹ </td>
                                </tr>
                                <tr>
                                    <td>Frontend</td>
                                    <td>HTML5, CSS3, JavaScript</td>
                                    <td>ES6+</td>
                                    <td>ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤</td>
                                </tr>
                                <tr>
                                    <td>ì°¨íŠ¸</td>
                                    <td>Chart.js</td>
                                    <td>3.x</td>
                                    <td>ë°ì´í„° ì‹œê°í™”</td>
                                </tr>
                                <tr>
                                    <td>ì¸ì¦</td>
                                    <td>JWT</td>
                                    <td>-</td>
                                    <td>BigQuery ì¸ì¦</td>
                                </tr>
                                <tr>
                                    <td>ë°ì´í„°ë² ì´ìŠ¤</td>
                                    <td>GCP BigQuery</td>
                                    <td>v2</td>
                                    <td>ë°ì´í„° ì €ì¥/ì¡°íšŒ</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- GCP API ì—°ë™ ì¤€ë¹„ì‚¬í•­ -->
            <section id="gcp-setup" class="section">
                <div class="section-header">
                    <h2>âš™ï¸ GCP API ì—°ë™ ì‚¬ì „ ì¤€ë¹„ì‚¬í•­</h2>
                </div>
                <div class="section-content">
                    <h3 id="project-setup">1. GCP í”„ë¡œì íŠ¸ ì„¤ì •</h3>
                    
                    <h4>1.1 í”„ë¡œì íŠ¸ ì •ë³´</h4>
                    <ul>
                        <li><strong>í”„ë¡œì íŠ¸ ID</strong>: <code>nimble-mode-415514</code></li>
                        <li><strong>í”„ë¡œì íŠ¸ ì´ë¦„</strong>: <code>My First Project</code></li>
                        <li><strong>ì§€ì—­</strong>: <code>asia-northeast3</code> (ì„œìš¸)</li>
                    </ul>

                    <h4>1.2 í•„ìˆ˜ API í™œì„±í™”</h4>
                    <div class="info-box">
                        <strong>ğŸ“ ê²½ë¡œ:</strong> GCP Console â†’ API ë° ì„œë¹„ìŠ¤ â†’ ë¼ì´ë¸ŒëŸ¬ë¦¬
                    </div>
                    <ul class="checklist">
                        <li>BigQuery API</li>
                        <li>BigQuery Data Transfer API</li>
                        <li>BigQuery Connection API</li>
                        <li>Google Drive API (ì„ íƒì‚¬í•­)</li>
                        <li>Google Sheets API (ì„ íƒì‚¬í•­)</li>
                    </ul>

                    <h3 id="service-account">2. ì„œë¹„ìŠ¤ ê³„ì • ìƒì„± ë° ì„¤ì •</h3>

                    <h4>2.1 ì„œë¹„ìŠ¤ ê³„ì • ìƒì„±</h4>
                    <div class="info-box">
                        <strong>ğŸ“ ê²½ë¡œ:</strong> GCP Console â†’ IAM ë° ê´€ë¦¬ â†’ ì„œë¹„ìŠ¤ ê³„ì •
                    </div>
                    <ol>
                        <li><strong>ì„œë¹„ìŠ¤ ê³„ì • ë§Œë“¤ê¸°</strong> í´ë¦­</li>
                        <li><strong>ì„œë¹„ìŠ¤ ê³„ì • ì„¸ë¶€ì •ë³´</strong> ì…ë ¥:
                            <ul>
                                <li>ì´ë¦„: <code>bigquery-dashboard</code></li>
                                <li>ì„¤ëª…: <code>BigQuery ëŒ€ì‹œë³´ë“œìš© ì„œë¹„ìŠ¤ ê³„ì •</code></li>
                                <li>ì´ë©”ì¼: <code>bigquery-dashboard@nimble-mode-415514.iam.gserviceaccount.com</code></li>
                            </ul>
                        </li>
                    </ol>

                    <h4>2.2 IAM ê¶Œí•œ í• ë‹¹</h4>
                    <div class="info-box">
                        <strong>ğŸ“ ê²½ë¡œ:</strong> GCP Console â†’ IAM ë° ê´€ë¦¬ â†’ IAM
                    </div>
                    <p>ì„œë¹„ìŠ¤ ê³„ì •ì— ë‹¤ìŒ ì—­í• ì„ ë¶€ì—¬í•˜ì„¸ìš”:</p>
                    <ul class="checklist">
                        <li>BigQuery ê´€ë¦¬ì (roles/bigquery.admin)</li>
                        <li>BigQuery ë°ì´í„° ë·°ì–´ (roles/bigquery.dataViewer)</li>
                        <li>BigQuery ë°ì´í„° í¸ì§‘ì (roles/bigquery.dataEditor)</li>
                        <li>BigQuery ì‘ì—… ì‚¬ìš©ì (roles/bigquery.jobUser)</li>
                        <li>ì„œë¹„ìŠ¤ ê³„ì • ì‚¬ìš©ì (roles/iam.serviceAccountUser)</li>
                        <li>í”„ë¡œì íŠ¸ ë·°ì–´ (roles/viewer)</li>
                    </ul>

                    <h4>2.3 JSON í‚¤ íŒŒì¼ ìƒì„±</h4>
                    <div class="info-box">
                        <strong>ğŸ“ ê²½ë¡œ:</strong> ì„œë¹„ìŠ¤ ê³„ì • ìƒì„¸ â†’ í‚¤ íƒ­
                    </div>
                    <ol>
                        <li><strong>í‚¤ ì¶”ê°€</strong> â†’ <strong>ìƒˆ í‚¤ ë§Œë“¤ê¸°</strong></li>
                        <li><strong>í‚¤ ìœ í˜•</strong>: JSON ì„ íƒ</li>
                        <li><strong>ë§Œë“¤ê¸°</strong> í´ë¦­</li>
                        <li>ìë™ ë‹¤ìš´ë¡œë“œëœ íŒŒì¼ëª…: <code>nimble-mode-415514-ed2ecc37e8f4.json</code></li>
                    </ol>

                    <h4>2.4 ë³´ì•ˆ ì„¤ì •</h4>
                    <pre><code># íŒŒì¼ ê¶Œí•œ ì„¤ì •
chmod 600 nimble-mode-415514-ed2ecc37e8f4.json

# .htaccess íŒŒì¼ì— ì›¹ ì ‘ê·¼ ì°¨ë‹¨
echo '&lt;Files "*.json"&gt;
    Order deny,allow
    Deny from all
&lt;/Files&gt;' &gt;&gt; .htaccess</code></pre>

                    <h3 id="bigquery-setup">3. BigQuery ë°ì´í„°ì…‹ ë° í…Œì´ë¸” ì„¤ì •</h3>

                    <h4>3.1 ë°ì´í„°ì…‹ ì •ë³´</h4>
                    <ul>
                        <li><strong>ë°ì´í„°ì…‹ ID</strong>: <code>bqml_tutorial</code></li>
                        <li><strong>ìœ„ì¹˜</strong>: <code>US</code> (ë¯¸êµ­)</li>
                        <li><strong>ì„¤ëª…</strong>: SESCO ë§ˆì¼€íŒ… ë°ì´í„° ë¶„ì„ìš©</li>
                    </ul>

                    <h4>3.2 ìƒ˜í”Œ í…Œì´ë¸” ìƒì„± (ë¹„ìš© ìµœì í™”)</h4>
                    <div class="info-box">
                        <strong>ğŸ“ ê²½ë¡œ:</strong> BigQuery Console â†’ SQL ì‘ì—…ê³µê°„
                    </div>
                    <pre><code>CREATE TABLE `nimble-mode-415514.bqml_tutorial.sesco3_sample` AS
SELECT 
  CAST(report_date AS DATE) as report_date,
  CAST(media_product AS STRING) as media_product,
  CAST(device_type AS STRING) as device_type,
  CAST(campaign_name AS STRING) as campaign_name,
  CAST(group_name AS STRING) as group_name,
  CAST(keyword_name AS STRING) as keyword_name,
  CAST(impression AS INT64) as impression,
  CAST(click AS INT64) as click,
  CAST(cost AS FLOAT64) as cost,
  CAST(rank AS FLOAT64) as rank
FROM `nimble-mode-415514.bqml_tutorial.sesco3`
ORDER BY report_date DESC, impression DESC
LIMIT 1000;</code></pre>

                    <h4>3.3 í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ</h4>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>ì»¬ëŸ¼ëª…</th>
                                    <th>ë°ì´í„° íƒ€ì…</th>
                                    <th>ì„¤ëª…</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>report_date</td><td>DATE</td><td>ë¦¬í¬íŠ¸ ë‚ ì§œ</td></tr>
                                <tr><td>media_product</td><td>STRING</td><td>ë§¤ì²´ ìƒí’ˆ</td></tr>
                                <tr><td>device_type</td><td>STRING</td><td>ë””ë°”ì´ìŠ¤ ìœ í˜•</td></tr>
                                <tr><td>campaign_name</td><td>STRING</td><td>ìº í˜ì¸ëª…</td></tr>
                                <tr><td>group_name</td><td>STRING</td><td>ê·¸ë£¹ëª…</td></tr>
                                <tr><td>keyword_name</td><td>STRING</td><td>í‚¤ì›Œë“œëª…</td></tr>
                                <tr><td>impression</td><td>INT64</td><td>ë…¸ì¶œìˆ˜</td></tr>
                                <tr><td>click</td><td>INT64</td><td>í´ë¦­ìˆ˜</td></tr>
                                <tr><td>cost</td><td>FLOAT64</td><td>ë¹„ìš©</td></tr>
                                <tr><td>rank</td><td>FLOAT64</td><td>ìˆœìœ„</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- ì†ŒìŠ¤ ì½”ë“œ êµ¬ì¡° -->
            <section id="source-structure" class="section">
                <div class="section-header">
                    <h2>ğŸ“ ì†ŒìŠ¤ ì½”ë“œ êµ¬ì¡°</h2>
                </div>
                <div class="section-content">
                    <h3>ë””ë ‰í† ë¦¬ êµ¬ì¡°</h3>
                    <div class="file-tree">
project-root/
â”œâ”€â”€ config.php                                    # ì„¤ì • íŒŒì¼
â”œâ”€â”€ bigquery.php                                  # BigQuery API í´ë˜ìŠ¤
â”œâ”€â”€ login.php                                     # ë¡œê·¸ì¸ í˜ì´ì§€
â”œâ”€â”€ dashboard.php                                 # ë©”ì¸ ëŒ€ì‹œë³´ë“œ
â”œâ”€â”€ api.php                                       # API ì—”ë“œí¬ì¸íŠ¸
â”œâ”€â”€ logout.php                                    # ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
â”œâ”€â”€ nimble-mode-415514-ed2ecc37e8f4.json         # ì„œë¹„ìŠ¤ ê³„ì • í‚¤ (ë³´ì•ˆ)
â”œâ”€â”€ cache/                                        # ìºì‹œ ë””ë ‰í† ë¦¬
â”‚   â””â”€â”€ dashboard_2024-08-21-14.json             # ìºì‹œ íŒŒì¼ë“¤
â””â”€â”€ assets/
    â”œâ”€â”€ style.css                                 # ìŠ¤íƒ€ì¼ì‹œíŠ¸
    â””â”€â”€ script.js                                 # ìë°”ìŠ¤í¬ë¦½íŠ¸
                    </div>

                    <h3>ì£¼ìš” íŒŒì¼ ì„¤ëª…</h3>
                    
                    <h4>config.php</h4>
                    <ul>
                        <li><strong>ëª©ì </strong>: ì „ì—­ ì„¤ì • ê´€ë¦¬</li>
                        <li><strong>í¬í•¨ ë‚´ìš©</strong>: GCP í”„ë¡œì íŠ¸ ì •ë³´, ì„œë¹„ìŠ¤ ê³„ì • íŒŒì¼ ê²½ë¡œ, ë¡œê·¸ì¸ ì •ë³´ (í•´ì‹œëœ ë¹„ë°€ë²ˆí˜¸), ë¹„ìš© ìµœì í™” ì„¤ì •</li>
                    </ul>

                    <h4>bigquery.php</h4>
                    <ul>
                        <li><strong>ëª©ì </strong>: BigQuery API ì—°ë™ í´ë˜ìŠ¤</li>
                        <li><strong>ì£¼ìš” ê¸°ëŠ¥</strong>: JWT í† í° ê¸°ë°˜ OAuth2 ì¸ì¦, SQL ì¿¼ë¦¬ ì‹¤í–‰, ë°ì´í„° ì¡°íšŒ ë° ì§‘ê³„, ì˜¤ë¥˜ ì²˜ë¦¬</li>
                    </ul>

                    <h4>dashboard.php</h4>
                    <ul>
                        <li><strong>ëª©ì </strong>: ë©”ì¸ ëŒ€ì‹œë³´ë“œ UI</li>
                        <li><strong>ê¸°ëŠ¥</strong>: íƒ­ ê¸°ë°˜ ì¸í„°í˜ì´ìŠ¤, ì‹¤ì‹œê°„ í†µê³„ í‘œì‹œ, ì°¨íŠ¸ ë° í…Œì´ë¸” ë Œë”ë§, ìºì‹œ ì‹œìŠ¤í…œ í™œìš©</li>
                    </ul>
                </div>
            </section>

            <!-- ì„¤ì¹˜ ë° ì„¤ì • -->
            <section id="installation" class="section">
                <div class="section-header">
                    <h2>ğŸ”§ ì„¤ì¹˜ ë° ì„¤ì • ê°€ì´ë“œ</h2>
                </div>
                <div class="section-content">
                    <h3>1. ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­</h3>
                    <ul class="checklist">
                        <li>PHP 7.4 ì´ìƒ</li>
                        <li>cURL í™•ì¥</li>
                        <li>OpenSSL í™•ì¥</li>
                        <li>JSON í™•ì¥</li>
                        <li>ì›¹ì„œë²„ (Apache/Nginx)</li>
                    </ul>

                    <h3>2. íŒŒì¼ ë°°ì¹˜</h3>
                    <pre><code># 1. í”„ë¡œì íŠ¸ íŒŒì¼ë“¤ì„ ì›¹ì„œë²„ ë””ë ‰í† ë¦¬ì— ì—…ë¡œë“œ
/var/www/html/gcp/

# 2. ìºì‹œ ë””ë ‰í† ë¦¬ ìƒì„± ë° ê¶Œí•œ ì„¤ì •
mkdir cache
chmod 755 cache

# 3. ì„œë¹„ìŠ¤ ê³„ì • í‚¤ íŒŒì¼ ë°°ì¹˜ ë° ë³´ì•ˆ ì„¤ì •
chmod 600 nimble-mode-415514-ed2ecc37e8f4.json</code></pre>

                    <h3>3. config.php ì„¤ì • í™•ì¸</h3>
                    <pre><code>return [
    'gcp_service_account_file' => __DIR__ . '/nimble-mode-415514-ed2ecc37e8f4.json',
    'gcp_project_id' => 'nimble-mode-415514',
    'dataset_id' => 'bqml_tutorial',
    'table_id' => 'sesco3_sample',
    'max_query_rows' => 1000,
];</code></pre>

                    <h3>4. ì ‘ì† ë° í…ŒìŠ¤íŠ¸</h3>
                    <ol>
                        <li><strong>ëŒ€ì‹œë³´ë“œ ì ‘ì†</strong>: <code>http://yourdomain.com/login.php</code></li>
                        <li><strong>ë¡œê·¸ì¸ ì •ë³´</strong>: admin / admin123</li>
                        <li><strong>ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</strong>: ëª¨ë“  íƒ­ì—ì„œ ë°ì´í„° í‘œì‹œ í™•ì¸</li>
                    </ol>
                </div>
            </section>

            <!-- ê¸°ëŠ¥ ëª…ì„¸ -->
            <section id="features" class="section">
                <div class="section-header">
                    <h2>ğŸ¯ ê¸°ëŠ¥ ëª…ì„¸</h2>
                </div>
                <div class="section-content">
                    <h3>ë¡œê·¸ì¸ ì‹œìŠ¤í…œ</h3>
                    <ul>
                        <li><strong>ì¸ì¦ ë°©ì‹</strong>: ì„¸ì…˜ ê¸°ë°˜</li>
                        <li><strong>ë¹„ë°€ë²ˆí˜¸</strong>: bcrypt í•´ì‹œ</li>
                        <li><strong>ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ</strong>: 1ì‹œê°„</li>
                        <li><strong>ë³´ì•ˆ</strong>: ë¸Œë£¨íŠ¸í¬ìŠ¤ ë°©ì§€ (1ì´ˆ ì§€ì—°)</li>
                    </ul>

                    <h3>ëŒ€ì‹œë³´ë“œ ê¸°ëŠ¥</h3>

                    <h4>ğŸ“ˆ ê°œìš” íƒ­</h4>
                    <ul>
                        <li><strong>í†µê³„ ì¹´ë“œ</strong>: ì´ ë…¸ì¶œìˆ˜, í´ë¦­ìˆ˜, ë¹„ìš©, í‰ê·  CTR</li>
                        <li><strong>ì¼ë³„ ì¶”ì´ ì°¨íŠ¸</strong>: Chart.js ë¼ì¸ ì°¨íŠ¸</li>
                        <li><strong>ë°ì´í„° ë²”ìœ„</strong>: ì „ì²´ ê¸°ê°„ (30ì¼)</li>
                    </ul>

                    <h4>ğŸ” í‚¤ì›Œë“œ ë¶„ì„ íƒ­</h4>
                    <ul>
                        <li><strong>ìƒìœ„ í‚¤ì›Œë“œ</strong>: ë…¸ì¶œìˆ˜ ê¸°ì¤€ ì •ë ¬</li>
                        <li><strong>ì„±ê³¼ ì§€í‘œ</strong>: CTR, CPC, í™œì„± ì¼ìˆ˜</li>
                        <li><strong>í‘œì‹œ ê°œìˆ˜</strong>: ìµœëŒ€ 15ê°œ</li>
                    </ul>

                    <h4>ğŸ“± ë””ë°”ì´ìŠ¤ ë¶„ì„ íƒ­</h4>
                    <ul>
                        <li><strong>ë¶„í¬ ì°¨íŠ¸</strong>: ë„ë„› ì°¨íŠ¸ (Chart.js)</li>
                        <li><strong>ì„±ê³¼ í…Œì´ë¸”</strong>: ë””ë°”ì´ìŠ¤ë³„ ìƒì„¸ í†µê³„</li>
                        <li><strong>ì§€ì› ë””ë°”ì´ìŠ¤</strong>: Mobile, Desktop ë“±</li>
                    </ul>

                    <h4>ğŸ“¢ ìº í˜ì¸ ë¶„ì„ íƒ­</h4>
                    <ul>
                        <li><strong>ì„±ê³¼ ìˆœìœ„</strong>: ë…¸ì¶œìˆ˜ ê¸°ì¤€</li>
                        <li><strong>ROI ë¶„ì„</strong>: ë¹„ìš© ëŒ€ë¹„ ì„±ê³¼</li>
                        <li><strong>í‘œì‹œ ê°œìˆ˜</strong>: ìµœëŒ€ 10ê°œ</li>
                    </ul>

                    <h4>ğŸ“‹ ì›ë³¸ ë°ì´í„° íƒ­</h4>
                    <ul>
                        <li><strong>ë°ì´í„° í…Œì´ë¸”</strong>: í˜ì´ì§€ë„¤ì´ì…˜ ì§€ì›</li>
                        <li><strong>í•„í„°ë§</strong>: ë””ë°”ì´ìŠ¤, ìº í˜ì¸ë³„</li>
                        <li><strong>í‘œì‹œ ì œí•œ</strong>: 100ê°œ/í˜ì´ì§€</li>
                    </ul>

                    <h3>API ì—”ë“œí¬ì¸íŠ¸</h3>
                    <pre><code>GET /api.php?action=raw_data         # ì›ë³¸ ë°ì´í„° ì¡°íšŒ
GET /api.php?action=daily_stats      # ì¼ë³„ í†µê³„
GET /api.php?action=keyword_analysis # í‚¤ì›Œë“œ ë¶„ì„
GET /api.php?action=device_analysis  # ë””ë°”ì´ìŠ¤ ë¶„ì„
GET /api.php?action=campaign_analysis # ìº í˜ì¸ ë¶„ì„</code></pre>
                </div>
            </section>

            <!-- ë¹„ìš© ìµœì í™” -->
            <section id="optimization" class="section">
                <div class="section-header">
                    <h2>ğŸ’° ë¹„ìš© ìµœì í™” ì „ëµ</h2>
                </div>
                <div class="section-content">
                    <h3>ë°ì´í„° ì œí•œ</h3>
                    <ul>
                        <li><strong>ìµœëŒ€ ì¡°íšŒ í–‰</strong>: 1,000ê°œ/ì¿¼ë¦¬</li>
                        <li><strong>ìƒ˜í”Œ í…Œì´ë¸”</strong>: 310ê°œ (ì „ì²´ 10ë§Œê°œ ëŒ€ë¹„ 99.7% ì ˆê°)</li>
                        <li><strong>í˜ì´ì§€ë„¤ì´ì…˜</strong>: 50ê°œ/í˜ì´ì§€</li>
                    </ul>

                    <h3>ìºì‹œ ì‹œìŠ¤í…œ</h3>
                    <ul>
                        <li><strong>ìºì‹œ ë°©ì‹</strong>: íŒŒì¼ ê¸°ë°˜ JSON</li>
                        <li><strong>ìºì‹œ ê¸°ê°„</strong>: 10ë¶„</li>
                        <li><strong>ìºì‹œ í‚¤</strong>: ë‚ ì§œ-ì‹œê°„ ê¸°ë°˜</li>
                        <li><strong>íš¨ê³¼</strong>: API í˜¸ì¶œ 90% ê°ì†Œ</li>
                    </ul>

                    <h3>ì¿¼ë¦¬ ìµœì í™”</h3>
                    <pre><code>-- íš¨ìœ¨ì ì¸ ì§‘ê³„ ì¿¼ë¦¬ ì˜ˆì‹œ
SELECT 
    report_date,
    SUM(impression) as total_impressions,
    COUNT(*) as total_records
FROM table 
GROUP BY report_date 
ORDER BY report_date DESC 
LIMIT 50;</code></pre>

                    <h3>ì˜ˆìƒ ë¹„ìš© (ì›”ê°„)</h3>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>í•­ëª©</th>
                                    <th>ì˜ˆìƒ ë¹„ìš©</th>
                                    <th>ì„¤ëª…</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>ì¿¼ë¦¬ ë¹„ìš©</td>
                                    <td>~$1-5</td>
                                    <td>1000í–‰ ì œí•œ</td>
                                </tr>
                                <tr>
                                    <td>ì €ì¥ ë¹„ìš©</td>
                                    <td>~$0.01</td>
                                    <td>ìƒ˜í”Œ í…Œì´ë¸”</td>
                                </tr>
                                <tr>
                                    <td>ë„¤íŠ¸ì›Œí¬ ë¹„ìš©</td>
                                    <td>~$0.1</td>
                                    <td>API í˜¸ì¶œ</td>
                                </tr>
                                <tr>
                                    <td><strong>ì´ ì˜ˆìƒ ë¹„ìš©</strong></td>
                                    <td><strong>~$5/ì›”</strong></td>
                                    <td>ìºì‹œ ì ìš© ì‹œ</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- ë³´ì•ˆ ê³ ë ¤ì‚¬í•­ -->
            <section id="security" class="section">
                <div class="section-header">
                    <h2>ğŸ›¡ï¸ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­</h2>
                </div>
                <div class="section-content">
                    <h3>ì¸ì¦ ë° ê¶Œí•œ</h3>
                    <ul>
                        <li><strong>ì„œë¹„ìŠ¤ ê³„ì •</strong>: ìµœì†Œ ê¶Œí•œ ì›ì¹™</li>
                        <li><strong>JWT í† í°</strong>: 1ì‹œê°„ ë§Œë£Œ</li>
                        <li><strong>ì„¸ì…˜ ê´€ë¦¬</strong>: íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬</li>
                    </ul>

                    <h3>íŒŒì¼ ë³´ì•ˆ</h3>
                    <pre><code># .htaccess ë³´ì•ˆ ì„¤ì •
&lt;Files "*.json"&gt;
    Order deny,allow
    Deny from all
&lt;/Files&gt;

&lt;Files "config.php"&gt;
    Order deny,allow
    Deny from all
&lt;/Files&gt;</code></pre>

                    <h3>SQL ì¸ì ì…˜ ë°©ì§€</h3>
                    <ul>
                        <li><strong>íŒŒë¼ë¯¸í„° ë°”ì¸ë”©</strong>: addslashes() ì ìš©</li>
                        <li><strong>ì…ë ¥ ê²€ì¦</strong>: í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ë°©ì‹</li>
                        <li><strong>ì˜¤ë¥˜ ë©”ì‹œì§€</strong>: ë¯¼ê° ì •ë³´ ë…¸ì¶œ ë°©ì§€</li>
                    </ul>
                </div>
            </section>

            <!-- íŠ¸ëŸ¬ë¸”ìŠˆíŒ… -->
            <section id="troubleshooting" class="section">
                <div class="section-header">
                    <h2>ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</h2>
                </div>
                <div class="section-content">
                    <h3>ì¼ë°˜ì ì¸ ë¬¸ì œ</h3>

                    <h4>1. "Permission denied while getting Drive credentials"</h4>
                    <div class="error-box">
                        <strong>ì›ì¸:</strong> Google Sheets ì—°ê²° í…Œì´ë¸” ì ‘ê·¼ ê¶Œí•œ ë¶€ì¡±<br>
                        <strong>í•´ê²°:</strong> ë„¤ì´í‹°ë¸Œ í…Œì´ë¸” ìƒì„±ìœ¼ë¡œ í•´ê²°
                    </div>
                    <pre><code>-- ë„¤ì´í‹°ë¸Œ í…Œì´ë¸” ìƒì„±ìœ¼ë¡œ í•´ê²°
CREATE TABLE sesco3_sample AS SELECT * FROM sesco3 LIMIT 1000;</code></pre>

                    <h4>2. "HTTP 403 Access Denied"</h4>
                    <div class="error-box">
                        <strong>ì›ì¸:</strong> BigQuery ê¶Œí•œ ë¶€ì¡±<br>
                        <strong>í•´ê²°:</strong> IAMì—ì„œ BigQuery ê´€ë¦¬ì ì—­í•  ì¶”ê°€
                    </div>

                    <h4>3. "ì„œë¹„ìŠ¤ ê³„ì • JSON íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"</h4>
                    <div class="error-box">
                        <strong>ì›ì¸:</strong> íŒŒì¼ ê²½ë¡œ ì˜¤ë¥˜<br>
                        <strong>í•´ê²°:</strong> config.phpì—ì„œ ì ˆëŒ€ ê²½ë¡œ í™•ì¸
                    </div>

                    <h4>4. ìºì‹œ íŒŒì¼ ìƒì„± ì‹¤íŒ¨</h4>
                    <div class="error-box">
                        <strong>ì›ì¸:</strong> cache/ ë””ë ‰í† ë¦¬ ê¶Œí•œ ë¶€ì¡±<br>
                        <strong>í•´ê²°:</strong> ê¶Œí•œ ì„¤ì •
                    </div>
                    <pre><code>chmod 755 cache/
chown www-data:www-data cache/</code></pre>

                    <h3>ë¡œê·¸ ë° ë””ë²„ê¹…</h3>
                    <pre><code>// ë””ë²„ê·¸ ëª¨ë“œ í™œì„±í™”
error_reporting(E_ALL);
ini_set('display_errors', 1);

// BigQuery API ì‘ë‹µ ë¡œê¹…
file_put_contents('debug.log', json_encode($response));</code></pre>
                </div>
            </section>

            <!-- í–¥í›„ ê³„íš -->
            <section id="future-plans" class="section">
                <div class="section-header">
                    <h2>ğŸš€ í–¥í›„ ê°œì„  ê³„íš</h2>
                </div>
                <div class="section-content">
                    <h3>Phase 2 (ì¤‘ê¸°)</h3>
                    <ul>
                        <li><strong>ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸</strong>: WebSocket ì—°ë™</li>
                        <li><strong>ê³ ê¸‰ í•„í„°ë§</strong>: ë‚ ì§œ ë²”ìœ„, ë³µí•© ì¡°ê±´</li>
                        <li><strong>ë°ì´í„° ë‚´ë³´ë‚´ê¸°</strong>: Excel, CSV ë‹¤ìš´ë¡œë“œ</li>
                        <li><strong>ì•Œë¦¼ ì‹œìŠ¤í…œ</strong>: ì„ê³„ê°’ ê¸°ë°˜ ì•Œë¦¼</li>
                    </ul>

                    <h3>Phase 3 (ì¥ê¸°)</h3>
                    <ul>
                        <li><strong>Vertex AI ì—°ë™</strong>: ë¨¸ì‹ ëŸ¬ë‹ ì˜ˆì¸¡</li>
                        <li><strong>Cloud Functions</strong>: ì„œë²„ë¦¬ìŠ¤ ETL</li>
                        <li><strong>BigQuery ML</strong>: ìë™ ì¸ì‚¬ì´íŠ¸ ìƒì„±</li>
                        <li><strong>ë©€í‹° í…Œë„ŒíŠ¸</strong>: ë‹¤ì¤‘ ê³ ê° ì§€ì›</li>
                    </ul>

                    <div class="success-box">
                        <h4>ğŸ“ ì§€ì› ë° ë¬¸ì˜</h4>
                        <ul>
                            <li><strong>í”„ë¡œì íŠ¸</strong>: SESCO BigQuery ëŒ€ì‹œë³´ë“œ</li>
                            <li><strong>ê°œë°œ ê¸°ê°„</strong>: 2024.08.20 - 2024.08.21</li>
                            <li><strong>ë²„ì „</strong>: v1.0.0</li>
                            <li><strong>ë¼ì´ì„ ìŠ¤</strong>: MIT License</li>
                        </ul>
                    </div>

                    <h3>ê¸°ìˆ  ì§€ì›</h3>
                    <ul>
                        <li><strong>GCP ê³µì‹ ë¬¸ì„œ</strong>: <a href="https://cloud.google.com/bigquery/docs" target="_blank">https://cloud.google.com/bigquery/docs</a></li>
                        <li><strong>BigQuery API ì°¸ì¡°</strong>: <a href="https://cloud.google.com/bigquery/docs/reference/rest" target="_blank">https://cloud.google.com/bigquery/docs/reference/rest</a></li>
                        <li><strong>PHP cURL ë¬¸ì„œ</strong>: <a href="https://www.php.net/manual/en/book.curl.php" target="_blank">https://www.php.net/manual/en/book.curl.php</a></li>
                    </ul>
                </div>
            </section>
        </main>
    </div>

    <script>
        // ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤í¬ë¡¤ ë™ê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            const tocLinks = document.querySelectorAll('.toc a');
            const sections = document.querySelectorAll('.section');

            // ë§í¬ í´ë¦­ ì‹œ ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤
            tocLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetSection = document.getElementById(targetId);
                    if (targetSection) {
                        targetSection.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // ìŠ¤í¬ë¡¤ ì‹œ í˜„ì¬ ì„¹ì…˜ í•˜ì´ë¼ì´íŠ¸
            window.addEventListener('scroll', function() {
                let current = '';
                sections.forEach(section => {
                    const rect = section.getBoundingClientRect();
                    if (rect.top <= 100) {
                        current = section.getAttribute('id');
                    }
                });

                tocLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === '#' + current) {
                        link.classList.add('active');
                    }
                });
            });
        });

        // ì½”ë“œ ë¸”ë¡ ë³µì‚¬ ê¸°ëŠ¥
        document.querySelectorAll('pre code').forEach(block => {
            const button = document.createElement('button');
            button.innerText = 'ğŸ“‹ ë³µì‚¬';
            button.style.cssText = `
                position: absolute;
                top: 10px;
                right: 10px;
                background: #4a5568;
                color: white;
                border: none;
                padding: 5px 10px;
                border-radius: 3px;
                cursor: pointer;
                font-size: 12px;
            `;
            
            block.parentElement.style.position = 'relative';
            block.parentElement.appendChild(button);
            
            button.addEventListener('click', () => {
                navigator.clipboard.writeText(block.textContent).then(() => {
                    button.innerText = 'âœ… ë³µì‚¬ë¨';
                    setTimeout(() => {
                        button.innerText = 'ğŸ“‹ ë³µì‚¬';
                    }, 2000);
                });
            });
        });
    </script>
</body>
</html>